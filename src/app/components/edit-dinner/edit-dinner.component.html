<div class="edit-dinner-container">
  <h2>Edit Dinner Listing</h2>

  <form [formGroup]="dinnerForm" (ngSubmit)="onSubmit()" class="edit-dinner-form">
    <div class="form-group">
      <label for="title">Title</label>
      <input
        type="text"
        id="title"
        formControlName="title"
        class="form-control"
        placeholder="Enter dinner title"
      >
      <div class="error" *ngIf="dinnerForm.get('title')?.invalid && dinnerForm.get('title')?.touched">
        Title is required and must be at least 5 characters long
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        id="description"
        formControlName="description"
        class="form-control"
        placeholder="Describe your dinner experience"
        rows="4"
      ></textarea>
      <div class="error" *ngIf="dinnerForm.get('description')?.invalid && dinnerForm.get('description')?.touched">
        Description is required and must be at least 20 characters long
      </div>
    </div>

    <div class="form-group">
      <label for="cuisine">Cuisine</label>
      <select id="cuisine" formControlName="cuisine" class="form-control">
        <option value="">Select cuisine</option>
        <option *ngFor="let cuisine of cuisines" [value]="cuisine">{{ cuisine }}</option>
      </select>
      <div class="error" *ngIf="dinnerForm.get('cuisine')?.invalid && dinnerForm.get('cuisine')?.touched">
        Please select a cuisine
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="date">Date</label>
        <input
          type="date"
          id="date"
          formControlName="date"
          class="form-control"
        >
        <div class="error" *ngIf="dinnerForm.get('date')?.invalid && dinnerForm.get('date')?.touched">
          Please select a date
        </div>
      </div>

      <div class="form-group">
        <label for="time">Time</label>
        <input
          type="time"
          id="time"
          formControlName="time"
          class="form-control"
        >
        <div class="error" *ngIf="dinnerForm.get('time')?.invalid && dinnerForm.get('time')?.touched">
          Please select a time
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="price">Price per Guest ($)</label>
        <input
          type="number"
          id="price"
          formControlName="price"
          class="form-control"
          min="0"
        >
        <div class="error" *ngIf="dinnerForm.get('price')?.invalid && dinnerForm.get('price')?.touched">
          Please enter a valid price
        </div>
      </div>

      <div class="form-group">
        <label for="maxGuests">Maximum Guests</label>
        <input
          type="number"
          id="maxGuests"
          formControlName="maxGuests"
          class="form-control"
          min="1"
        >
        <div class="error" *ngIf="dinnerForm.get('maxGuests')?.invalid && dinnerForm.get('maxGuests')?.touched">
          Please enter a valid number of guests
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="location">Location</label>
      <input
        type="text"
        id="location"
        formControlName="location"
        class="form-control"
        placeholder="Enter dinner location"
      >
      <div class="error" *ngIf="dinnerForm.get('location')?.invalid && dinnerForm.get('location')?.touched">
        Please enter a location
      </div>
    </div>

    <div class="form-group">
      <label for="menu">Menu</label>
      <textarea
        id="menu"
        formControlName="menu"
        class="form-control"
        placeholder="Describe the menu"
        rows="3"
      ></textarea>
      <div class="error" *ngIf="dinnerForm.get('menu')?.invalid && dinnerForm.get('menu')?.touched">
        Please describe the menu
      </div>
    </div>

    <div class="form-group">
      <label>Dietary Restrictions</label>
      <div class="checkbox-group">
        <div *ngFor="let restriction of dietaryRestrictions" class="checkbox-item">
          <input
            type="checkbox"
            [id]="restriction"
            [value]="restriction"
            (change)="toggleDietaryRestriction($event, restriction)"
          >
          <label [for]="restriction">{{ restriction }}</label>
        </div>
      </div>
    </div>

    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" routerLink="/my-listings">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="!dinnerForm.valid || isSubmitting">
        {{ isSubmitting ? 'Updating...' : 'Update Dinner Listing' }}
      </button>
    </div>
  </form>
</div> 